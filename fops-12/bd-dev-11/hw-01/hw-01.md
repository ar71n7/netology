# Домашнее задание к занятию 1. «Типы и структура СУБД»

## Задача 1
### Задание
Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- электронные чеки в json-виде,
- склады и автомобильные дороги для логистической компании,
- генеалогические деревья,
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,
- отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ
- электронные чеки в json-виде: документоориентированную, потому что нативно хранит данные в JSON
- склады и автомобильные дороги для логистической компании: графовую, чтобы строить связи (дороги) между узлами (складами)
- генеалогические деревья: иерархическую, чтобы сохранять структуру родитель-потомок
- кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации: "ключ-значение", позволит и TTL настроить и хранить данный вид данных наиболее эффективно
- отношения клиент-покупка для интернет-магазина: реляционная, чтобы иметь свои наборы полей для разных видов сущностей и настраивать связи между таблицами

## Задача 2
### Задание
Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

- данные записываются на все узлы с задержкой до часа (асинхронная запись);
- при сетевых сбоях система может разделиться на 2 раздельных кластера;
- система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

### Ответ
- данные записываются на все узлы с задержкой до часа (асинхронная запись): CAP - PA, PACELC - PA/EC
- при сетевых сбоях система может разделиться на 2 раздельных кластера: CAP - PA, PACELC - PA/EL
- система может не прислать корректный ответ или сбросить соединение: CAP - PC, PACELC - PC/EL

## Задача 3
### Задание
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ
Так как принципы BASE и ACID являются концептуально противоположными, то полное сочетание в рамках одной системы
считается невозможным, только частичное.

## Задача 4
### Задание
Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни,
- реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. 
Что это за система? Какие минусы выбора этой системы?

### Ответ
Вероятно речь про in-memory DB типа Redis, которая реализует key-value хранилище с TTL и механизмом Pub/Sub.
Минусы:
- Особенности режима persistence (вытеснение на диск) в виде снижения производительности или повышенного потребления ресурсов (в первую очередь памяти)
- Отсутствие встроенного шифрования данных
- Ограниченная сложность запросов, особенно учитывая однопоточность
- Отсутствие возможности строить отношения между данными
- В режиме Pub/Sub есть вероятность потерять "непрочитанные" данные если процесс, подписанный на канал, упадет
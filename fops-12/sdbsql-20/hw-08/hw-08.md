# Домашнее задание к занятию «Резервное копирование баз данных»

---
## Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях:

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

*Приведите ответ в свободной форме.*

### Ответ
#### 1.1
Полное резервное копирование, потому что снимается полная копия всех данных и объектов базы данных.
#### 1.2
- Инкрементные резервные копии, включающие в себя запись только тех данных, которые были изменены с момента последнего полного или инкрементного копирования.
- Дифференциальные резервные копии, включающие в себя запись данных, которые изменились с момента последнего полного резервного копирования. Отличие от инкрементного в том, что дифференциальные копии увеличиваются в размерах со временем, так как каждая новая дифференциальная копия содержит все изменения с момента последнего полного резервного копирования.
- Логи транзакций, хранящие последовательность всех транзакций, выполненных в базе данных.

---

## Задание 2. PostgreSQL
### Задание
2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

*Приведите ответ в свободной форме.*

### Ответ
#### Резервное копирование с использованием pg_dump
```
pg_dump -U postgres -h localhost -p 5432 -F c -f "/backup/db_backup.dump" mydatabase
```
Создаст резервную копию базы данных mydatabase в двоичном формате (c) и сохранит её в файл /backup/db_backup.dump

#### Восстановление с использованием pg_restore
```
pg_restore -U postgres -h localhost -p 5432 -d mydatabase -c "/backup/db_backup.dump"
```
Восстановит базу данных mydatabase из файла /backup/db_backup.dump

---

## Задание 3. MySQL
### Задание
3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

*Приведите ответ в свободной форме.*

### Ответ
Возможно я не прав, но по части MySQL нашел, что инкрементные бэкапы доступны только в MySQL Enterprise Edition, а MySQL Community Edition придется использовать сторонние решения, например, Percona XtraBackup.
#### MySQL Enterprise Backup
```
mysqlbackup --user=root --password=your_password --port=3306 --host=localhost --backup-dir=/path/to/incremental/backup --incremental --incremental-base-dir=/path/to/full/backup --with-timestamp backup
```
#### XtraBackup
```
xtrabackup --backup --target-dir=/path/to/incremental/backup --incremental-basedir=/path/to/full/backup
```